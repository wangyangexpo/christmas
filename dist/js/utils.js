function getQueryString(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return null!=t?decodeURI(t[2]):null}function setData(e){for(var i in e)sessionStorage.setItem(i,JSON.stringify(e[i]))}function getData(e){return JSON.parse(sessionStorage.getItem(e))}function is_weixin(){return 1==config.is_test?config.is_weixin:"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function is_mobike(){if(config.is_test)return config.is_mobike;var e=window.navigator.userAgent.toLowerCase();return/mobike/.test(e)}function mobikeShare(e,i){window.Mobike.menu("menu",{title:"分享"},function(){window.Mobike.share("share",{title:config.sharetitle[i],content:config.sharesubtitle[i],url:e,img:config.shareicon,mask:"3",type:"12"})})}function ajaxGet(e,i,t){config.is_test?t&&t(test_res):$.ajax({type:"get",xhrFields:{withCredentials:!0},data:i,url:e,success:function(e){0==e.error_code?(console.log("success"),t&&t(e)):alert(e.error_msg)}})}function authorization(e){var i=config.host+config.authorization;is_weixin()?ajaxGet(i,{},function(){config.is_auth=!0,e&&e()}):console.log("not in wx!")}function joinGameByPhone(e,i){ajaxGet(config.host+config.joinbyphone,{mobile:e},i)}function checkJoinCode(e,i,t){ajaxGet(config.host+config.joincheck,{mobile:e,code:i},t)}function joinGameByWX(e){var i=config.host+config.joinbyweixin;config.is_auth?ajaxGet(i,{},e):authorization(function(){ajaxGet(i,{},e)})}function getAssistList(e,i){var t=config.host+config.prizelist;config.is_auth?ajaxGet(t,{master_uid:e},i):authorization(function(){ajaxGet(t,{master_uid:e},i)})}function giftGetCode(e,i){ajaxGet(config.host+config.prizebind,{mobile:e},i)}function giftCheckCode(e,i,t){ajaxGet(config.host+config.bindcheck,{mobile:e,code:i},t)}function checkMyGift(e){var i=config.host+config.giftlist;config.is_auth?ajaxGet(i,{},e):authorization(function(){ajaxGet(i,{},e)})}function openGift(e,i,t){ajaxGet(config.host+config.prize,{master_uid:e,position:i},t)}function getCookie(e){var i,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(i=document.cookie.match(t))?unescape(i[2]):null}function wxShare(e,i,t){var n=["onMenuShareTimeline","onMenuShareAppMessage"],o=location.href.split("#")[0],a=config.sharetitle[i],s=config.sharesubtitle[i];t&&(a=a.replace("xxx",t));var r=config.shareicon,c=e;if(config.is_test)return console.log(a),console.log(s),console.log(r),void console.log(c);$.ajax({data:{data:JSON.stringify({url:o})},type:"get",url:config.host+config.wxsdk,success:function(e){if(0==e.error_code){var i=e.data;wx.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:n})}else alert("获取微信接口信息失败！")}}),wx.ready(function(){wx.onMenuShareTimeline({title:a,link:c,imgUrl:r,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:a,desc:s,link:c,imgUrl:r,success:function(){},cancel:function(){}})}),wx.error(function(e){console.log(e)})}var test_res={error_code:0,error_msg:"",master_info:{nickname:"wangyangexpo",headimgurl:"../images/test_avatar.jpeg"},custom_prize_status:1,custom_prize_info:{position:1,result:56,time:151928323},master_prize_status:0,master_prize_info:{result:103},prize_list:[{headimgurl:"../images/test_avatar.jpeg",nickname:"胖大海",result:1,time:151823123},{headimgurl:"../images/test_avatar.jpeg",nickname:"小星星",result:103,time:151863124}],gift_list:[{result:20,status:0,time:151823123},{result:101,status:1,time:151823123,code:"mon-8888123499997777"}],master_result:51,custom_result:5,code:"test-8888999966664321",id:"WMYLWYXNXYXRDYY"};is_weixin()?(getCookie("uid")&&getCookie("token")?config.is_auth=!0:authorization(),wxShare(config.defaultshareurl,0)):is_mobike()&&mobikeShare(config.defaultshareurl,0);