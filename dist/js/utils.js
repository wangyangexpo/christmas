function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?decodeURI(i[2]):null}function setData(e){for(var t in e)sessionStorage.setItem(t,JSON.stringify(e[t]))}function getData(e){return JSON.parse(sessionStorage.getItem(e))}function is_weixin(){return 1==config.is_test?config.is_weixin:"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function is_mobike(){if(config.is_test)return config.is_mobike;var e=window.navigator.userAgent.toLowerCase();return/mobike/.test(e)}function mobikeShare(e,t){window.Mobike.menu("menu",{title:"分享"},function(){window.Mobike.share("share",{title:config.sharetitle[t],content:config.sharesubtitle[t],url:e,img:config.shareicon,mask:"3",type:"12"})})}function ajaxGet(e,t,i){config.is_test?i&&i(test_res):$.ajax({type:"get",xhrFields:{withCredentials:!0},data:t,url:e,success:function(e){0==e.error_code?(console.log("success"),i&&i(e)):alert(e.error_msg)}})}function authorization(e){var t=config.host+config.authorization;is_weixin()?ajaxGet(t,{},function(){config.is_auth=!0,e&&e()}):console.log("not in wx!")}function joinGameByPhone(e,t){ajaxGet(config.host+config.joinbyphone,{mobile:e},t)}function checkJoinCode(e,t,i){ajaxGet(config.host+config.joincheck,{mobile:e,code:t},i)}function joinGameByWX(e){var t=config.host+config.joinbyweixin;config.is_auth?ajaxGet(t,{},e):authorization(function(){ajaxGet(t,{},e)})}function getAssistList(e,t){var i=config.host+config.prizelist;config.is_auth?ajaxGet(i,{master_uid:e},t):authorization(function(){ajaxGet(i,{master_uid:e},t)})}function giftGetCode(e,t){ajaxGet(config.host+config.prizebind,{mobile:e},t)}function giftCheckCode(e,t,i){ajaxGet(config.host+config.bindcheck,{mobile:e,code:t},i)}function checkMyGift(e){var t=config.host+config.giftlist;config.is_auth?ajaxGet(t,{},e):authorization(function(){ajaxGet(t,{},e)})}function openGift(e,t,i){ajaxGet(config.host+config.prize,{master_uid:e,position:t},i)}function getCookie(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null}function wxShare(e,t,i){var n=["onMenuShareTimeline","onMenuShareAppMessage"],o=location.href.split("#")[0],s=config.sharetitle[t],a=config.sharesubtitle[t];i&&(s=s.replace("xxx",i));var r=config.shareicon,c=e;if(config.is_test)return console.log(s),console.log(a),console.log(r),void console.log(c);$.ajax({data:{data:JSON.stringify({url:o})},type:"get",url:config.host+config.wxsdk,success:function(e){if(0==e.error_code){var t=e.data;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:n})}else alert("获取微信接口信息失败！")}}),wx.ready(function(){wx.onMenuShareTimeline({title:s,link:c,imgUrl:r,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:s,desc:a,link:c,imgUrl:r,success:function(){},cancel:function(){}})}),wx.error(function(e){console.log(e)})}var test_res={error_code:0,error_msg:"",master_info:{nickname:"wangyangexpo",headimgurl:"../images/test_avatar.jpeg"},custom_prize_status:0,custom_prize_info:{position:1,result:56,time:151928323},master_prize_status:1,master_prize_info:{result:103},prize_list:[{headimgurl:"../images/test_avatar.jpeg",nickname:"胖大海",result:1,time:151823123},{headimgurl:"../images/test_avatar.jpeg",nickname:"小星星",result:103,time:151863124}],gift_list:[{result:20,status:0,time:151823123},{result:101,status:1,time:151823123,code:"mon-8888123499997777"},{result:102,status:1,time:151823123,code:"yea-8888123499997777"},{result:103,status:1,time:151823123},{result:104,status:1,time:151823123},{result:105,status:1,time:151823123}],master_result:51,custom_result:1,code:"test-8888999966664321",id:"WMYLWYXNXYXRDYY"};is_weixin()?(getCookie("uid")&&getCookie("token")?config.is_auth=!0:authorization(),wxShare(config.defaultshareurl,0)):is_mobike()&&mobikeShare(config.defaultshareurl,0);